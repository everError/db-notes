## 더티 리드 (Dirty Read)란?

**더티 리드**는 한 트랜잭션이 아직 **최종 확정(커밋, Commit)되지 않은 다른 트랜잭션의 수정 데이터를 읽는 것**을 의미합니다. '더티(Dirty)'라는 단어는 데이터가 아직 확정되지 않아 언제든지 취소(롤백, Rollback)될 수 있는, 즉 '오염될 가능성이 있는' 데이터라는 의미를 가집니다.

---

### 더티 리드는 어떻게 발생하나요? 🧐

더티 리드는 두 개 이상의 트랜잭션이 동시에 같은 데이터에 접근할 때 발생할 수 있습니다. 가장 이해하기 쉬운 예시는 은행 계좌 이체입니다.

**상황**: A의 계좌에 100만 원이 있습니다.

1.  **트랜잭션 1 (송금 시작)**: B에게 30만 원을 송금하려고 합니다.

    - A의 계좌 잔액을 70만 원으로 **수정합니다.**
    - **아직 이체 절차가 끝나지 않아 커밋(Commit)은 하지 않은 상태입니다.**

2.  **트랜잭션 2 (잔액 조회)**: 이때 다른 사용자가 A의 계좌 잔액을 조회합니다.

    - 만약 이 트랜잭션이 잠금(Lock)을 무시하고 데이터를 읽도록 허용되어 있다면(격리 수준: `READ UNCOMMITTED`), 아직 커밋되지 않은 **70만 원**이라는 값을 읽게 됩니다. 이것이 바로 **더티 리드**입니다.

3.  **문제 발생**: 만약 **트랜잭션 1(송금)**이 네트워크 오류 등 예상치 못한 문제로 **실패하여 롤백(Rollback)**되면 어떻게 될까요?
    - A의 계좌 잔액은 원래 값인 **100만 원**으로 복구됩니다.
    - 하지만 **트랜잭션 2**는 이미 **'존재하지 않는' 70만 원**이라는 잘못된 데이터를 읽어서 사용자에게 보여주거나 다른 계산에 사용했을 수 있습니다. 이로 인해 데이터 정합성이 완전히 깨지게 됩니다.

---

### 더티 리드와 격리 수준

더티 리드는 데이터베이스 **트랜잭션 격리 수준**과 직접적인 관련이 있습니다.

- **`READ UNCOMMITTED` (레벨 0)**

  - 가장 낮은 격리 수준으로, 다른 트랜잭션이 커밋하지 않은 데이터를 읽는 **더티 리드를 허용**합니다.
  - SQL Server의 `WITH (NOLOCK)` 힌트가 바로 이 수준으로 동작하게 만듭니다.
  - 데이터 정합성을 해칠 위험이 매우 크지만, 잠금이 거의 발생하지 않아 동시성은 가장 높습니다.

- **`READ COMMITTED` (레벨 1) 이상**
  - 대부분의 데이터베이스(Oracle, PostgreSQL, SQL Server 등)가 채택하는 **기본 격리 수준**입니다.
  - 이 수준부터는 **더티 리드를 허용하지 않습니다.** 즉, 반드시 다른 트랜잭션이 **커밋한 데이터만** 읽을 수 있습니다.
  - 이를 위해 커밋되지 않은 데이터에 잠금(Lock)을 걸어 다른 트랜잭션의 접근을 막거나, 커밋된 버전의 데이터를 따로 관리하는 방식을 사용합니다.

### 요약

| 특징       | 설명                                                                                   |
| :--------- | :------------------------------------------------------------------------------------- |
| **정의**   | 커밋되지 않은 데이터를 다른 트랜잭션이 읽는 현상                                       |
| **원인**   | 매우 낮은 트랜잭션 격리 수준 (`READ UNCOMMITTED`)                                      |
| **문제점** | 데이터가 롤백될 경우, 존재하지 않는 잘못된 데이터를 읽게 되어 **데이터 정합성이 깨짐** |
| **해결책** | `READ COMMITTED` 이상의 격리 수준을 사용하여 커밋된 데이터만 읽도록 보장               |

결론적으로, 더티 리드는 데이터 무결성을 심각하게 해칠 수 있기 때문에, 조회 성능을 극단적으로 높여야 하고 데이터가 약간 틀려도 괜찮은 특수한 경우가 아니라면 반드시 피해야 하는 현상입니다.
